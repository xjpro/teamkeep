<div id="duties" class="table-container stacks">
    <div class="table-controls">
        
        <div style="clear: both;"></div>
    </div>
    <table when-focused="preventSorting">
        <thead>
            <tr>
                <th class="button"></th>
                <th class="name"><a>Assigned to</a></th>
                <th class="max"><a>Duty</a></th>
            </tr>
        </thead>
        <tbody ng-hide="events.length > 0">
            <tr>
                <td class="fullinfo" colspan="3">
                    No events have been posted for this team
                </td>
            </tr>
        </tbody>
        <tbody ng-repeat="event in events | orderBy:eventPredicate">
            <tr>
                <td class="heading" colspan="3">
                    <h6>
                        <i ng-class="eventTypeIcon(event.Type)"></i> &nbsp; {{ event.OpponentName || '[Untitled]' }}
                    </h6>
                    <span>
                        {{ (event.When) ? '&mdash; ' + event.When : '' }}
                    </span>
                    <div class="pull-right">
                        <button class="btn btn-mini" ng-click="addDuty(event)" title="Add new duty">
                            <i class="icon-plus-sign-alt"></i> {{event.Duties.length == 1 ? '1 duty' : event.Duties.length + ' duties'}}
                        </button>
                    </div>
                </td>
            </tr>

            <tr ng-repeat="duty in event.Duties">
                <td class="button">
                    <a id="dropLabel" class="dropdown-toggle" role="button" data-toggle="dropdown" data-target="#"><i class="icon-edit"></i></a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dropLabel">
                        <li><a tabindex="-1" ng-click="removeDuty(duty)">Remove</a></li>
                    </ul>
                </td>
                <td class="name">
                    <button class="btn btn-link dropdown-toggle" data-toggle="dropdown" tabindex="-1">
                        {{ playerName(duty.PlayerId) }}
                    </button>
                    <ul class="dropdown-menu">
                        <li ng-repeat="player in players">
                            <a tabindex="-1" ng-click="assignDuty(duty, player)">{{ player.FirstName + ' ' + player.LastName }}</a>
                        </li>
                    </ul>
                </td>
                <td class="max">
                    <input class="mod" type="text" ng-model="duty.Name" complete-update />
                </td>
            </tr>            
        </tbody>
    </table>
</div>
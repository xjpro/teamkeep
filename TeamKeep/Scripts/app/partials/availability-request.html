<div class="container">
    
    <div class="row">
        <div class="span12">
            <a class="btn btn-link" href="#/availability">
                <i class="icon-arrow-left"></i> Return to availability
            </a>
        </div>
    </div>

    <form class="row" ng-submit="sendRequests()">
        <div class="span7">
            
            <h3 class="heading">{{eventHeading}}</h3>
            <div class="horizontal">
                <label>When</label>
                <span>{{eventWhen}}</span>
            </div>
            <div class="horizontal">
                <label style="height: 100px;">Where</label>
                <p ng-bind-html-unsafe="eventWhere"></p>
            </div>
            <div class="pull-right">
                <button type="submit" class="btn btn-success" spinner="requesting">
                    Request availability
                </button>
            </div>
        </div>

        <div class="span5">
            <h3 class="heading">Recipients</h3>
            <ul class="unstyled" ng-repeat="group in groups" ng-show="group.Players.length > 0">
                <li class="player-group">
                    <label class="checkbox heading">
                        <input type="checkbox" ng-click="toggleGroupSelected(group)"/> 
                        <h5>{{group.Name}}</h5>
                    </label>
                    <ul>
                        <li ng-repeat="member in group.Players" ng-switch="!availabilityEmailSent(member) && member.Email != null">
                            <label class="checkbox" ng-switch-when="true">
                                <input type="checkbox" ng-model="member.selected"/> 
                                <span>{{member | fullName}}</span>
                                <small>{{member.Email}}</small>
                            </label>   
                            <label class="disabled" title="{{(member.Email != null) ? 'Request already sent' : 'Email address required'}}" ng-switch-when="false">
                                <i class="icon-envelope"></i>
                                <span>{{member | fullName}}</span>
                                <small>{{member.Email}}</small>
                            </label>  
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
       
    </form>
</div>